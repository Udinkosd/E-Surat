-- Generated by Oracle SQL Developer Data Modeler 21.1.0.092.1221
--   at:        2023-10-30 17:45:29 SGT
--   site:      DB2/UDB 7.1
--   type:      DB2/UDB 7.1



CREATE TABLE Admin 
    (
     ID_Pengguna CHAR (10) NOT NULL , 
     Email VARCHAR (30) NOT NULL ,
     Password INTEGER NOT NULL
    )
;

ALTER TABLE Admin ADD CONSTRAINT Admin_PK PRIMARY KEY (ID_Pengguna)
;

CREATE TABLE Aktivitas 
    (
     ID_Aktivitas CHAR (10) NOT NULL , 
     Tanggal TIMESTAMP NOT NULL , 
     Jenis_Aktivitas VARCHAR (30) NOT NULL , 
     Deskripsi VARCHAR (30) NOT NULL , 
     Admin_ID_Pengguna CHAR (10) NOT NULL 
    )
;

ALTER TABLE Aktivitas ADD CONSTRAINT Aktivitas_PK PRIMARY KEY (ID_Aktivitas)
;

CREATE TABLE Data_Diri 
    (
     NIM CHAR (10) NOT NULL , 
     Nama_Mahasiswa VARCHAR (30) NOT NULL , 
     Prodi VARCHAR (30) NOT NULL , 
     Jenjang_Studi VARCHAR (30) NOT NULL , 
     IPK DOUBLE NOT NULL , 
     Kontak INTEGER NOT NULL , 
     Angkatan INTEGER NOT NULL , 
     Semester INTEGER NOT NULL , 
     Alamat VARCHAR (30) NOT NULL , 
     TTL DATE NOT NULL 
    )
;

ALTER TABLE Data_Diri ADD CONSTRAINT Data_Diri_PK PRIMARY KEY (NIM)
;

CREATE TABLE Mahasiswa 
    (
     ID_Pengguna CHAR (10) NOT NULL , 
     Data_Diri_NIM CHAR (10) NOT NULL ,
     Password INTEGER NOT NULL
    )
;

ALTER TABLE Mahasiswa ADD CONSTRAINT Mahasiswa_PK PRIMARY KEY (ID_Pengguna)
;

ALTER TABLE Mahasiswa ADD CONSTRAINT Mahasiswa_PKv1 UNIQUE (Data_Diri_NIM)
;

CREATE TABLE Pengajuan 
    (
     ID_Pengajuan CHAR (10) NOT NULL , 
     Peruntukan VARCHAR (30) NOT NULL , 
     Lampiran VARCHAR (30) NOT NULL , 
     Mahasiswa_NIM1 CHAR (10) NOT NULL , 
     Aktivitas_ID_Aktivitas CHAR (10) NOT NULL 
    )
;

ALTER TABLE Pengajuan ADD CONSTRAINT Pengajuan_PK PRIMARY KEY (ID_Pengajuan)
;

CREATE TABLE Pengguna 
    (
     ID_Pengguna CHAR (10) NOT NULL , 
     Password INTEGER NOT NULL 
    )
;

ALTER TABLE Pengguna ADD CONSTRAINT Pengguna_PK PRIMARY KEY (ID_Pengguna)
;

CREATE TABLE Riwayat_Surat 
    (
     ID_Surat VARCHAR (30) NOT NULL , 
     Jenis_Surat VARCHAR (30) NOT NULL , 
     Status VARCHAR (20) NOT NULL , 
     Posisi_Surat VARCHAR (30) NOT NULL , 
     Action VARCHAR (20) NOT NULL , 
     Pengajuan_ID_Pengajuan CHAR (10) NOT NULL 
    )
;

ALTER TABLE Riwayat_Surat ADD CONSTRAINT Riwayat_Surat_PK PRIMARY KEY (ID_Surat)
;

ALTER TABLE Admin
    ADD CONSTRAINT Admin_Pengguna_FK FOREIGN KEY
    ( 
     ID_Pengguna
    ) 
    REFERENCES Pengguna 
    ( 
     ID_Pengguna
    )
    ON DELETE NO ACTION
    ON UPDATE NO ACTION
;

ALTER TABLE Aktivitas
    ADD CONSTRAINT Aktivitas_Admin_FK FOREIGN KEY
    ( 
     Admin_ID_Pengguna
    ) 
    REFERENCES Admin 
    ( 
     ID_Pengguna
    )
    ON DELETE CASCADE
    ON UPDATE NO ACTION
;

ALTER TABLE Mahasiswa
    ADD CONSTRAINT Mahasiswa_Data_Diri_FK FOREIGN KEY
    ( 
     Data_Diri_NIM
    ) 
    REFERENCES Data_Diri 
    ( 
     NIM
    )
    ON DELETE CASCADE
    ON UPDATE NO ACTION
;

ALTER TABLE Mahasiswa
    ADD CONSTRAINT Mahasiswa_Pengguna_FK FOREIGN KEY
    ( 
     ID_Pengguna
    ) 
    REFERENCES Pengguna 
    ( 
     ID_Pengguna
    )
    ON DELETE NO ACTION
    ON UPDATE NO ACTION
;

ALTER TABLE Pengajuan
    ADD CONSTRAINT Pengajuan_Aktivitas_FK FOREIGN KEY
    ( 
     Aktivitas_ID_Aktivitas
    ) 
    REFERENCES Aktivitas 
    ( 
     ID_Aktivitas
    )
    ON DELETE CASCADE
    ON UPDATE NO ACTION
;

ALTER TABLE Pengajuan
    ADD CONSTRAINT Pengajuan_Mahasiswa_FK FOREIGN KEY
    ( 
     Mahasiswa_NIM1
    ) 
    REFERENCES Mahasiswa 
    ( 
     Data_Diri_NIM
    )
    ON DELETE CASCADE
    ON UPDATE NO ACTION
;

ALTER TABLE Riwayat_Surat
    ADD CONSTRAINT Riwayat_Surat_Pengajuan_FK FOREIGN KEY
    ( 
     Pengajuan_ID_Pengajuan
    ) 
    REFERENCES Pengajuan 
    ( 
     ID_Pengajuan
    )
    ON DELETE CASCADE
    ON UPDATE NO ACTION
;



-- Oracle SQL Developer Data Modeler Summary Report: 
-- 
-- CREATE TABLE                             7
-- CREATE INDEX                             0
-- ALTER TABLE                             15
-- CREATE VIEW                              0
-- ALTER VIEW                               0
-- CREATE PACKAGE                           0
-- CREATE PACKAGE BODY                      0
-- CREATE PROCEDURE                         0
-- CREATE FUNCTION                          0
-- CREATE TRIGGER                           0
-- ALTER TRIGGER                            0
-- CREATE STRUCTURED TYPE                   0
-- CREATE ALIAS                             0
-- CREATE BUFFERPOOL                        0
-- CREATE DATABASE                          0
-- CREATE DISTINCT TYPE                     0
-- CREATE INSTANCE                          0
-- CREATE NODE GROUP                        0
-- CREATE TABLESPACE                        0
-- 
-- DROP TABLESPACE                          0
-- DROP DATABASE                            0
-- 
-- ERRORS                                   0
-- WARNINGS                                 0
